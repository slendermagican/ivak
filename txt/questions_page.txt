<?php

session_start();
include "../db/connection.php";

// Check if question ID is provided in the URL
if (isset($_GET['quiz_id'])) {
    $quiz_id = $_GET['quiz_id'];

    // Fetch question data from the database
    $questionQuery = "SELECT * FROM questions WHERE quiz_id = $quiz_id";
    $questionResult = mysqli_query($conn, $questionQuery);

    if (!$questionResult) {
        die("Error: " . mysqli_error($conn));
    }

    $questions = mysqli_fetch_all($questionResult, MYSQLI_ASSOC);
} else {
    // Redirect to quizzes.php if no question ID is provided
    header("Location: quizzes.php");
    exit();
}
?>


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question</title>
    <script src="https://kit.fontawesome.com/5b1a9e5fe0.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>

<body class="bg-gray-100 flex flex-col h-screen">

    <?php include "../components/header.php"; ?>

    <main class="flex-grow">
        <div class="max-w-3xl mx-auto mt-8 p-4 bg-white rounded-md shadow-md">



            <!-- Question Form -->
            <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">
                <?php foreach ($questions as $question) { ?>

                    <div>
                        <!-- Question Text -->
                        <h2><?php echo "Question:" . htmlspecialchars($question['id']); ?></h2>
                        <hr>
                        <h3><?php echo htmlspecialchars($question['question_text']); ?></h3>

                        <img src="<?php echo htmlspecialchars($question['img_src']) ?>" alt="<?php echo htmlspecialchars($question['img_alt']) ?>" class="w-full h-64 object-cover rounded-md mb-2">

                        <!-- Create a 2x2 grid of buttons for answers -->
                        <div class="grid grid-cols-2 gap-4">
                            <button type="button" class="answer-button bg-blue-500 text-white px-4 py-2 rounded-md" data-correct="<?php echo ($question['correct_answer_index'] == 1) ? 'true' : 'false'; ?>"><?php echo htmlspecialchars($question['answer1']); ?></button>
                            <button type="button" class="answer-button bg-blue-500 text-white px-4 py-2 rounded-md" data-correct="<?php echo ($question['correct_answer_index'] == 2) ? 'true' : 'false'; ?>"><?php echo htmlspecialchars($question['answer2']); ?></button>
                            <button type="button" class="answer-button bg-blue-500 text-white px-4 py-2 rounded-md" data-correct="<?php echo ($question['correct_answer_index'] == 3) ? 'true' : 'false'; ?>"><?php echo htmlspecialchars($question['answer3']); ?></button>
                            <button type="button" class="answer-button bg-blue-500 text-white px-4 py-2 rounded-md" data-correct="<?php echo ($question['correct_answer_index'] == 4) ? 'true' : 'false'; ?>"><?php echo htmlspecialchars($question['answer4']); ?></button>
                        </div>

                    </div>

                <?php } ?>
            </form>



        </div>
    </main>
    <!-- Inside your <head> tag -->
    <style>
        .clicked {
            background-color: #4CAF50;
            /* Green background */
            color: white;
        }
    </style>

    <!-- ... your existing head content ... -->

    <!-- Inside your <body> tag, after the existing content -->
    <script>
        $(document).ready(function() {
            $('.answer-button').click(function() {
                // Remove 'clicked' class from all buttons
                $('.answer-button').removeClass('clicked');

                // Add 'clicked' class to the clicked button
                $(this).addClass('clicked');
            });
        });
    </script>

    <?php include "../components/footer.php"; ?>

</body>

</html>

















  $isCorrect = ($question['correct_answer_index'] == $i);
                                $buttonClass ="bg-blue-500";

                                if(isset($_POST['submitted'])){
                                    if($isCorrect==true){
                                        $buttonClass ="bg-green-500";
                                    }else{
                                        $buttonClass ="bg-red-500";
                                    }
                                }
                                ?>